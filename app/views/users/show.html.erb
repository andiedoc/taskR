<% provide(:title, @user.name) %>

<div class="row">
  <aside class="col-xs-12 col-md-12">
    <section class="user_info center-content">
      <%= gravatar_for @user %><br>
      <h1><%= @user.name %></h1>
    </section>
  </aside>
  <section class="user_tasks">
    <h1>user</h1>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th>id</th>
          <th>name</th>
          <th>email</th>
          <th>password</th>
          <th>tasks</th>
          <th>created at</th>
          <th>updated at</th>
          <th colspan="3"></th>
        </tr>
        </thead>
        <tbody>
        <% @users.each do |user| %>
            <tr>
              <td><%= user.id %></td>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td><input type="password" value="<%= user.password_digest %>" class="field new_task" disabled="disabled"></td>
              <td><%= user.count_of_tasks %></td>
              <td><%= user.created_at %></td>
              <td><%= user.updated_at %></td>
              <td><%= link_to 'Show', user, class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to 'Edit', edit_user_path(user), class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %></td>
            </tr>
        <% end %>
        </tbody>
      </table>
    </div>
    <h1>tasks</h1>
    <p><%= link_to "new task", new_task_path, class: 'btn btn-success btn-sm btn-block' %></p>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>id</th>
            <th>user id</th>
            <th>category</th>
            <th>name</th>
            <th>duration</th>
            <th>created at</th>
            <th>started at</th>
            <th>stopped at</th>
            <th>updated at</th>
            <th>active</th>
            <th colspan="3"></th>
          </tr>
        </thead>
        <tbody>
          <% @user.tasks.each do |task| %>
              <tr>
                <td><%= task.id %></td>
                <td><%= task.user_id %></td>
                <td><%= task.category %></td>
                <td><%= task.name %></td>
                <td><%= task.duration %></td>
                <td><%= task.created_at %></td>
                <td><%= task.started_at %></td>
                <td><%= task.stopped_at %></td>
                <td><%= task.updated_at %></td>
                <td><%= task.active %></td>
                <td><%= link_to "Show", task, class: 'btn btn-primary btn-sm' %></td>
                <td><%= link_to "Edit", edit_task_path(task), class: 'btn btn-primary btn-sm' %></td>
                <td><%= link_to "Remove", task, method: :delete, data: { confirm: "Are you sure?" }, class: 'btn btn-danger btn-sm' %></td>
              </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </section>
</div>