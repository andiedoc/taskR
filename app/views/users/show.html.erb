<% provide(:title, @user.name) %>
<% provide(:optional_javascript, javascript_path(path_to_javascript('jquery.tzineClock.js'))) %>
<% provide(:optional_javascript, javascript_path(path_to_javascript('reload_each_visit.js'))) %>
<div class="row">
  <aside class="col-xs-12 col-md-4">
    <section class="user_info">
      <h1>
        <%= gravatar_for @user %>
      </h1>
      <div class="table-responsive">
        <table class="table">
          <tr>
            <td>name</td>
            <th><span class="label label-default"><%= @user.name %></span></th>
          </tr>
          <tr>
            <td>id</td>
            <th><span class="label label-default"><%= @user.id %></span></th>
          </tr>
          <tr>
            <th>email</th>
            <th><span class="label label-default"><%= @user.email%></span></th>
          </tr>
        </table>
      </div>
    </section>
  </aside>
  <div class="col-xs-12 col-md-8">
    <div class="center-content">
      <div id="fancyClock"></div>
    </div>
  </div>
  <section class="user_tasks">
    <h1>user</h1>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th>id</th>
          <th>name</th>
          <th>email</th>
          <th>password</th>
          <th>created at</th>
          <th>updated at</th>
          <th colspan="3"></th>
        </tr>
        </thead>
        <tbody>
        <% @users.each do |user| %>
            <tr>
              <td><%= user.id %></td>
              <td><%= user.name %></td>
              <td><%= user.email %></td>
              <td><%= user.password_digest %></td>
              <td><%= user.created_at %></td>
              <td><%= user.updated_at %></td>
              <td><%= link_to 'Show', user, class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to 'Edit', edit_user_path(user), class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to 'Destroy', user, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger btn-sm' %></td>
            </tr>
        <% end %>
        </tbody>
      </table>
    </div>
    <h1>tasks</h1>
    <div class="table-responsive">
      <table class="table table-striped table-hover">
        <tr>
          <th>id</th>
          <th>user id</th>
          <th>name</th>
          <th>duration</th>
          <th>created at</th>
          <th>started at</th>
          <th>stopped at</th>
          <th>updated at</th>
          <th>active</th>
          <th colspan="3"></th>
        </tr>
        <% @user.tasks.each do |task| %>
            <tr>
              <td><%= task.id %></td>
              <td><%= task.user_id %></td>
              <td><%= task.name %></td>
              <td><%= task.duration %></td>
              <td><%= task.created_at %></td>
              <td><%= task.started_at %></td>
              <td><%= task.stopped_at %></td>
              <td><%= task.updated_at %></td>
              <td><%= task.active %></td>
              <td><%= link_to "Show", task, class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to "Edit", edit_task_path(task), class: 'btn btn-primary btn-sm' %></td>
              <td><%= link_to "Remove", task, method: :delete, data: { confirm: "Are you sure?" }, class: 'btn btn-danger btn-sm' %></td>
            </tr>
        <% end %>
      </table>
    </div>
  </section>
</div>